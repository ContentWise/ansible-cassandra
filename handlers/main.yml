---
- name: sequentially restart Cassandra
  # `serial: 1` would be the proper solution here, but that can only be set on play level (upstream issue: https://github.com/ansible/ansible/issues/12170)
  run_once: true
  with_items: "{{ play_hosts }}"
  delegate_to: "{{ item }}"
  shell: systemctl restart cassandra && sleep {{ cassandra_sleep_between_restarts }}